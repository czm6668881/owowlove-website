# OWOWLOVE.COM Supabase é›†æˆè®¾ç½®æŒ‡å—

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSupabaseé¡¹ç›®

### 1. æ³¨å†ŒSupabaseè´¦å·
1. è®¿é—® [https://supabase.com](https://supabase.com)
2. ç‚¹å‡» "Start your project" 
3. ä½¿ç”¨GitHubè´¦å·ç™»å½•ï¼ˆæ¨èï¼‰

### 2. åˆ›å»ºæ–°é¡¹ç›®
1. ç‚¹å‡» "New Project"
2. é€‰æ‹©ç»„ç»‡ï¼ˆä¸ªäººè´¦å·ï¼‰
3. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: `owowlove-database`
   - **Database Password**: ç”Ÿæˆå¼ºå¯†ç å¹¶ä¿å­˜
   - **Region**: é€‰æ‹©ç¦»æ‚¨æœ€è¿‘çš„åŒºåŸŸï¼ˆå»ºè®®ï¼šSingapore æˆ– Tokyoï¼‰
4. ç‚¹å‡» "Create new project"

### 3. ç­‰å¾…é¡¹ç›®åˆ›å»º
- é¡¹ç›®åˆ›å»ºéœ€è¦1-2åˆ†é’Ÿ
- åˆ›å»ºå®Œæˆåä¼šæ˜¾ç¤ºé¡¹ç›®ä»ªè¡¨æ¿

## ğŸ”‘ ç¬¬äºŒæ­¥ï¼šè·å–APIå¯†é’¥

### 1. è·å–é¡¹ç›®URLå’Œå¯†é’¥
1. åœ¨é¡¹ç›®ä»ªè¡¨æ¿ï¼Œç‚¹å‡»å·¦ä¾§ "Settings" â†’ "API"
2. å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Project URL**: `https://your-project-id.supabase.co`
   - **anon public key**: `eyJ...` (å…¬å¼€å¯†é’¥)
   - **service_role key**: `eyJ...` (æœåŠ¡ç«¯å¯†é’¥ï¼Œä¿å¯†ï¼)

### 2. é…ç½®ç¯å¢ƒå˜é‡
åœ¨Vercelä¸­æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-public-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

## ğŸ—„ï¸ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæ•°æ®åº“è¡¨

### 1. æ‰“å¼€SQLç¼–è¾‘å™¨
1. åœ¨Supabaseä»ªè¡¨æ¿ï¼Œç‚¹å‡»å·¦ä¾§ "SQL Editor"
2. ç‚¹å‡» "New query"

### 2. æ‰§è¡Œè¡¨ç»“æ„è„šæœ¬
å¤åˆ¶å¹¶æ‰§è¡Œ `supabase/migrations/001_initial_schema.sql` ä¸­çš„å†…å®¹

### 3. æ‰§è¡Œå®‰å…¨ç­–ç•¥è„šæœ¬
å¤åˆ¶å¹¶æ‰§è¡Œ `supabase/migrations/002_security_policies.sql` ä¸­çš„å†…å®¹

## ğŸ”’ ç¬¬å››æ­¥ï¼šé…ç½®å®‰å…¨è®¾ç½®

### 1. å¯ç”¨è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰
- æ‰€æœ‰è¡¨å·²è‡ªåŠ¨å¯ç”¨RLS
- å®‰å…¨ç­–ç•¥å·²é…ç½®å®Œæˆ

### 2. éªŒè¯å®‰å…¨ç­–ç•¥
åœ¨SQLç¼–è¾‘å™¨ä¸­è¿è¡Œï¼š
```sql
-- æŸ¥çœ‹æ‰€æœ‰ç­–ç•¥
SELECT schemaname, tablename, policyname, permissive, roles, cmd, qual 
FROM pg_policies 
WHERE schemaname = 'public';
```

## ğŸ“Š ç¬¬äº”æ­¥ï¼šè¿ç§»ç°æœ‰æ•°æ®

### 1. å®‰è£…ä¾èµ–
```bash
npm install tsx --save-dev
```

### 2. è¿è¡Œæ•°æ®è¿ç§»
```bash
npx tsx scripts/migrate-data.ts
```

### 3. éªŒè¯æ•°æ®è¿ç§»
åœ¨Supabaseä»ªè¡¨æ¿çš„ "Table Editor" ä¸­æ£€æŸ¥ï¼š
- `categories` è¡¨
- `products` è¡¨  
- `users` è¡¨

## ğŸ§ª ç¬¬å…­æ­¥ï¼šæµ‹è¯•è¿æ¥

### 1. æµ‹è¯•å…¬å¼€æ•°æ®è®¿é—®
```javascript
import { supabase } from './lib/supabase'

// æµ‹è¯•è·å–äº§å“
const { data, error } = await supabase
  .from('products')
  .select('*')
  .limit(5)

console.log('Products:', data)
```

### 2. æµ‹è¯•ç®¡ç†å‘˜åŠŸèƒ½
- ç™»å½•ç®¡ç†åå°ï¼š`/en/admin/login`
- ä½¿ç”¨å¯†ç ï¼š`owowlove2025`
- æµ‹è¯•äº§å“ç®¡ç†åŠŸèƒ½

## ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²æ›´æ–°

### 1. æäº¤ä»£ç 
```bash
git add .
git commit -m "feat: integrate Supabase database"
git push
```

### 2. åœ¨Vercelä¸­é…ç½®ç¯å¢ƒå˜é‡
1. è®¿é—® Vercel é¡¹ç›®è®¾ç½®
2. æ·»åŠ  Supabase ç¯å¢ƒå˜é‡
3. é‡æ–°éƒ¨ç½²é¡¹ç›®

## ğŸ“‹ æ•°æ®è®¿é—®æƒé™æ€»ç»“

| æ•°æ®ç±»å‹ | æ¸¸å®¢è®¿é—® | ç”¨æˆ·è®¿é—® | ç®¡ç†å‘˜è®¿é—® |
|---------|---------|---------|-----------|
| äº§å“ä¿¡æ¯ | âœ… åªè¯» | âœ… åªè¯» | âœ… å®Œå…¨æ§åˆ¶ |
| ç±»ç›®ä¿¡æ¯ | âœ… åªè¯» | âœ… åªè¯» | âœ… å®Œå…¨æ§åˆ¶ |
| ç”¨æˆ·èµ„æ–™ | âŒ æ— æƒé™ | âœ… è‡ªå·±çš„æ•°æ® | âœ… æ‰€æœ‰ç”¨æˆ· |
| è®¢å•æ•°æ® | âŒ æ— æƒé™ | âœ… è‡ªå·±çš„è®¢å• | âœ… æ‰€æœ‰è®¢å• |
| è”ç³»æ¶ˆæ¯ | âœ… åªèƒ½åˆ›å»º | âœ… åªèƒ½åˆ›å»º | âœ… æŸ¥çœ‹æ‰€æœ‰ |

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **è¿æ¥å¤±è´¥**: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®
2. **æƒé™é”™è¯¯**: ç¡®è®¤RLSç­–ç•¥å·²æ­£ç¡®è®¾ç½®
3. **æ•°æ®ä¸æ˜¾ç¤º**: æ£€æŸ¥è¡¨ä¸­æ˜¯å¦æœ‰æ•°æ®ä¸” `is_active = true`

### è°ƒè¯•æ–¹æ³•
1. åœ¨Supabaseä»ªè¡¨æ¿æŸ¥çœ‹å®æ—¶æ—¥å¿—
2. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ£€æŸ¥ç½‘ç»œè¯·æ±‚
3. åœ¨ä»£ç ä¸­æ·»åŠ  `console.log` æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ
å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®æ‚¨è§£å†³ï¼
